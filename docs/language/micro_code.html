

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Micro Code &mdash; Eight Bit Computer  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Hardware" href="../hardware/index.html" />
    <link rel="prev" title="Machine Code" href="machine_code.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Eight Bit Computer
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/index.html">Modules</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Language</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="assembly.html">Assembly</a></li>
<li class="toctree-l2"><a class="reference internal" href="machine_code.html">Machine Code</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Micro Code</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#address-bits">Address bits</a></li>
<li class="toctree-l3"><a class="reference internal" href="#output-bits">Output bits</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fetch">Fetch</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../hardware/index.html">Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/index.html">Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development_tools.html">Development Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Credits</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Eight Bit Computer</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Language</a> &raquo;</li>
        
      <li>Micro Code</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/language/micro_code.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="micro-code">
<span id="id1"></span><h1>Micro Code<a class="headerlink" href="#micro-code" title="Permalink to this headline">¶</a></h1>
<p>Microcode is the encoding of what specific steps the computer should take to
complete an instruction.</p>
<p>It is effectively a large combinational logic circuit where the inputs are the
instruction byte, microcode step and flag bits and the outputs are the control
signals to drive the modules. EEPROM chips are programmed and used to implement
this combinational logic circuit. The same address is fed into 4
chips, differently programmed to get the 30 output bits.</p>
<p>Every instruction is comprised of up to six micro code steps. There are eight
available but the first two are reserved for fetching the instruction byte
itself. The steps are executed sequentially to perform the instruction. The
microcode step counter controls the order of the sequence. The flags bits allow
conditional operation based on a given instruction byte and step. An instruction
can “surrender” it’s remaining steps and move onto the next instruction if it
has completed all it’s necessary steps.</p>
<div class="section" id="address-bits">
<h2>Address bits<a class="headerlink" href="#address-bits" title="Permalink to this headline">¶</a></h2>
<p>The address bits for the EEPROM and their meanings are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="54%" />
<col width="46%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Bits</th>
<th class="head">Meaning</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">xxxxxxxx.......</span></code></td>
<td>Instruction byte</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">........xxxx...</span></code></td>
<td>Flags</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">............xxx</span></code></td>
<td>Microcode step</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="output-bits">
<h2>Output bits<a class="headerlink" href="#output-bits" title="Permalink to this headline">¶</a></h2>
<p>The output bits for the EEPROMs and their meanings (which will typically occur
on the next rising data clock edge) are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="11%" />
<col width="63%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Bits</th>
<th class="head">Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">1.......</span> <span class="pre">........</span> <span class="pre">........</span> <span class="pre">........</span></code></td>
<td>ACC_IN</td>
<td>Enable input for the accumulator register.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">.1......</span> <span class="pre">........</span> <span class="pre">........</span> <span class="pre">........</span></code></td>
<td>ACC_OUT</td>
<td>Enable output for the accumulator register.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">..1.....</span> <span class="pre">........</span> <span class="pre">........</span> <span class="pre">........</span></code></td>
<td>A_IN</td>
<td>Enable input for the A register.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">...1....</span> <span class="pre">........</span> <span class="pre">........</span> <span class="pre">........</span></code></td>
<td>A_OUT</td>
<td>Enable output for the A register.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">....1...</span> <span class="pre">........</span> <span class="pre">........</span> <span class="pre">........</span></code></td>
<td>B_IN</td>
<td>Enable input for the B register.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">.....1..</span> <span class="pre">........</span> <span class="pre">........</span> <span class="pre">........</span></code></td>
<td>B_OUT</td>
<td>Enable output for the B register.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">......1.</span> <span class="pre">........</span> <span class="pre">........</span> <span class="pre">........</span></code></td>
<td>C_IN</td>
<td>Enable input for the C register.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">.......1</span> <span class="pre">........</span> <span class="pre">........</span> <span class="pre">........</span></code></td>
<td>C_OUT</td>
<td>Enable output for the C register.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">........</span> <span class="pre">1.......</span> <span class="pre">........</span> <span class="pre">........</span></code></td>
<td>ALU_STORE_RESULT</td>
<td>Store the current output of the ALU.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">........</span> <span class="pre">.1......</span> <span class="pre">........</span> <span class="pre">........</span></code></td>
<td>ALU_STORE_FLAGS</td>
<td>Store the current flags of the ALU..</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">........</span> <span class="pre">..1.....</span> <span class="pre">........</span> <span class="pre">........</span></code></td>
<td>ALU_OUT</td>
<td>Enable output for the ALU.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">........</span> <span class="pre">...1....</span> <span class="pre">........</span> <span class="pre">........</span></code></td>
<td>ALU_A_IS_BUS</td>
<td>Set the A input of the ALU to be the bus (otherwise it is the content of the accumulator register).</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">........</span> <span class="pre">....1...</span> <span class="pre">........</span> <span class="pre">........</span></code></td>
<td>ALU_S0</td>
<td>Set the S0 function select input on the ALU.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">........</span> <span class="pre">.....1..</span> <span class="pre">........</span> <span class="pre">........</span></code></td>
<td>ALU_S1</td>
<td>Set the S1 function select input on the ALU.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">........</span> <span class="pre">......1.</span> <span class="pre">........</span> <span class="pre">........</span></code></td>
<td>ALU_S2</td>
<td>Set the S2 function select input on the ALU.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">........</span> <span class="pre">.......1</span> <span class="pre">........</span> <span class="pre">........</span></code></td>
<td>ALU_S3</td>
<td>Set the S3 function select input on the ALU.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">........</span> <span class="pre">........</span> <span class="pre">1.......</span> <span class="pre">........</span></code></td>
<td>ALU_M</td>
<td>Set the M input on the ALU.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">........</span> <span class="pre">........</span> <span class="pre">.1......</span> <span class="pre">........</span></code></td>
<td>ALU_C_IN</td>
<td>Set the carry in input on the ALU.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">........</span> <span class="pre">........</span> <span class="pre">..1.....</span> <span class="pre">........</span></code></td>
<td>MAR_IN</td>
<td>Enable input for the memory address register.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">........</span> <span class="pre">........</span> <span class="pre">...1....</span> <span class="pre">........</span></code></td>
<td>RAM_IN</td>
<td>Enable input for the RAM.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">........</span> <span class="pre">........</span> <span class="pre">....1...</span> <span class="pre">........</span></code></td>
<td>RAM_OUT</td>
<td>Enable output for the RAM.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">........</span> <span class="pre">........</span> <span class="pre">.....1..</span> <span class="pre">........</span></code></td>
<td>RAM_SEL_PROG_MEM</td>
<td>Retrieve data from program memory rather than data memory.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">........</span> <span class="pre">........</span> <span class="pre">......1.</span> <span class="pre">........</span></code></td>
<td>SP_IN</td>
<td>Enable input for the stack pointer.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">........</span> <span class="pre">........</span> <span class="pre">.......1</span> <span class="pre">........</span></code></td>
<td>SP_OUT</td>
<td>Enable output for the stack pointer.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">........</span> <span class="pre">........</span> <span class="pre">........</span> <span class="pre">1.......</span></code></td>
<td>PC_IN</td>
<td>Enable input for the program counter.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">........</span> <span class="pre">........</span> <span class="pre">........</span> <span class="pre">.1......</span></code></td>
<td>PC_OUT</td>
<td>Enable output for the program counter.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">........</span> <span class="pre">........</span> <span class="pre">........</span> <span class="pre">..1.....</span></code></td>
<td>PC_COUNT</td>
<td>Increment the value stored in the program counter.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">........</span> <span class="pre">........</span> <span class="pre">........</span> <span class="pre">...1....</span></code></td>
<td>IR_IN</td>
<td>Enable input for the instruction register.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">........</span> <span class="pre">........</span> <span class="pre">........</span> <span class="pre">....1...</span></code></td>
<td>CU_STEP_RESET</td>
<td>Reset the step counter in the control unit.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">........</span> <span class="pre">........</span> <span class="pre">........</span> <span class="pre">.....1..</span></code></td>
<td>CLOCK_HALT</td>
<td>Halt the computer.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="fetch">
<h2>Fetch<a class="headerlink" href="#fetch" title="Permalink to this headline">¶</a></h2>
<p>To execute an instruction, the instruction byte must be loaded from program
memory into the instruction register.</p>
<p>This is handled by the first two steps of every instruction which:</p>
<ul class="simple">
<li>Load the program counter into the memory address register.</li>
<li>Load the instruction register with the data from program memory at increment
the program counter ready for the next instruction.</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../hardware/index.html" class="btn btn-neutral float-right" title="Hardware" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="machine_code.html" class="btn btn-neutral float-left" title="Machine Code" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Andy Palmer

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>